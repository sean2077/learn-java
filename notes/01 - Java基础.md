# Java åŸºç¡€

## é¢å‘å¯¹è±¡

### é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾

å°è£…ã€ç»§æ‰¿ã€å¤šæ€

### é¢å‘å¯¹è±¡çš„äº”å¤§åŸºæœ¬åŸåˆ™

- å•ä¸€èŒè´£åŸåˆ™(SRP): ä¸€ä¸ªç±»ï¼Œæœ€å¥½åªåšä¸€ä»¶äº‹ï¼Œåªæœ‰ä¸€ä¸ªå¼•èµ·å®ƒçš„å˜åŒ–ã€‚
- å¼€æ”¾å°é—­åŸåˆ™(OCP): è½¯ä»¶å®ä½“åº”è¯¥æ˜¯å¯æ‰©å±•çš„ï¼Œè€Œä¸å¯ä¿®æ”¹çš„
- é‡Œæ°æ›¿æ¢åŸåˆ™(LSP): å­ç±»å¿…é¡»èƒ½å¤Ÿæ›¿æ¢å…¶åŸºç±»
- ä¾èµ–å€’ç½®åŸåˆ™(DIP): ä¾èµ–äºæŠ½è±¡ã€‚å…·ä½“è€Œè¨€å°±æ˜¯é«˜å±‚æ¨¡å—ä¸ä¾èµ–äºåº•å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åŒä¾èµ–äºæŠ½è±¡ï¼›æŠ½è±¡ä¸ä¾èµ–äºå…·ä½“ï¼Œå…·ä½“ä¾èµ–äºæŠ½è±¡
- æ¥å£éš”ç¦»åŸåˆ™: ä½¿ç”¨å¤šä¸ªå°çš„ä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸è¦ä½¿ç”¨ä¸€ä¸ªå¤§çš„æ€»æ¥å£

### è®¿é—®æƒé™

Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è®¿é—®æ§åˆ¶ç¬¦æ¥ä¿æŠ¤å¯¹ç±»ã€å˜é‡ã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•çš„è®¿é—®ã€‚Java æ”¯æŒ 4 ç§ä¸åŒçš„è®¿é—®æƒé™ã€‚

- **default** (å³é»˜è®¤ï¼Œä»€ä¹ˆä¹Ÿä¸å†™ï¼‰: åœ¨åŒä¸€åŒ…å†…å¯è§ï¼Œä¸ä½¿ç”¨ä»»ä½•ä¿®é¥°ç¬¦ã€‚ä½¿ç”¨å¯¹è±¡ï¼šç±»ã€æ¥å£ã€å˜é‡ã€æ–¹æ³•ã€‚
- **private** : åœ¨åŒä¸€ç±»å†…å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šå˜é‡ã€æ–¹æ³•ã€‚ **æ³¨æ„ï¼šä¸èƒ½ä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰**
- **public** : å¯¹æ‰€æœ‰ç±»å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šç±»ã€æ¥å£ã€å˜é‡ã€æ–¹æ³•
- **protected** : å¯¹åŒä¸€åŒ…å†…çš„ç±»å’Œæ‰€æœ‰å­ç±»å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šå˜é‡ã€æ–¹æ³•ã€‚ **æ³¨æ„ï¼šä¸èƒ½ä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰**ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹è¡¨æ¥è¯´æ˜è®¿é—®æƒé™ï¼š

| ä¿®é¥°ç¬¦      | å½“å‰ç±» | åŒä¸€åŒ…å†… | å­å­™ç±»(åŒä¸€åŒ…) | å­å­™ç±»(ä¸åŒåŒ…)                                                                     | å…¶ä»–åŒ… |
| :---------- | :----- | :------- | :------------- | :--------------------------------------------------------------------------------- | :----- |
| `public`    | Y      | Y        | Y              | Y                                                                                  | Y      |
| `protected` | Y      | Y        | Y              | Y/Nï¼ˆ[è¯´æ˜](https://www.runoob.com/java/java-modifier-types.html#protected-desc)ï¼‰ | N      |
| `default`   | Y      | Y        | Y              | N                                                                                  | N      |
| `private`   | Y      | N        | N              | N                                                                                  | N      |

å¯ä»¥å¯¹ç±»æˆ–ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µå’Œæ–¹æ³•ï¼‰åŠ ä¸Šè®¿é—®ä¿®é¥°ç¬¦ã€‚

- ç±»å¯è§è¡¨ç¤ºå…¶å®ƒç±»å¯ä»¥ç”¨è¿™ä¸ªç±»åˆ›å»ºå®ä¾‹å¯¹è±¡ã€‚
- æˆå‘˜å¯è§è¡¨ç¤ºå…¶å®ƒç±»å¯ä»¥ç”¨è¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡è®¿é—®åˆ°è¯¥æˆå‘˜ï¼›

protected ç”¨äºä¿®é¥°æˆå‘˜ï¼Œè¡¨ç¤ºåœ¨ç»§æ‰¿ä½“ç³»ä¸­æˆå‘˜å¯¹äºå­ç±»å¯è§ï¼Œä½†æ˜¯è¿™ä¸ªè®¿é—®ä¿®é¥°ç¬¦å¯¹äºç±»æ²¡æœ‰æ„ä¹‰ã€‚

å¦‚æœå­ç±»çš„æ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»ä¸­è¯¥æ–¹æ³•çš„è®¿é—®çº§åˆ«ä¸å…è®¸ä½äºçˆ¶ç±»çš„è®¿é—®çº§åˆ«ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿å¯ä»¥ä½¿ç”¨çˆ¶ç±»å®ä¾‹çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å­ç±»å®ä¾‹å»ä»£æ›¿ï¼Œä¹Ÿå°±æ˜¯ç¡®ä¿æ»¡è¶³é‡Œæ°æ›¿æ¢åŸåˆ™ã€‚

å­—æ®µå†³ä¸èƒ½æ˜¯å…¬æœ‰çš„ï¼Œå› ä¸ºè¿™ä¹ˆåšçš„è¯å°±å¤±å»äº†å¯¹è¿™ä¸ªå­—æ®µä¿®æ”¹è¡Œä¸ºçš„æ§åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥å¯¹å…¶éšæ„ä¿®æ”¹ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒAccessExample æ‹¥æœ‰ id å…¬æœ‰å­—æ®µï¼Œå¦‚æœåœ¨æŸä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ int å­˜å‚¨ id å­—æ®µï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹æ‰€æœ‰çš„å®¢æˆ·ç«¯ä»£ç ã€‚

å¯ä»¥ä½¿ç”¨å…¬æœ‰çš„ getter å’Œ setter æ–¹æ³•æ¥æ›¿æ¢å…¬æœ‰å­—æ®µï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥æ§åˆ¶å¯¹å­—æ®µçš„ä¿®æ”¹è¡Œä¸ºã€‚

ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œå¦‚æœæ˜¯åŒ…çº§ç§æœ‰çš„ç±»æˆ–è€…ç§æœ‰çš„åµŒå¥—ç±»ï¼Œé‚£ä¹ˆç›´æ¥æš´éœ²æˆå‘˜ä¸ä¼šæœ‰ç‰¹åˆ«å¤§çš„å½±å“ã€‚

### æ¯”è¾ƒä¸‹æŠ½è±¡ç±»å’Œæ¥å£

- ä»è®¾è®¡å±‚é¢ä¸Šçœ‹ï¼ŒæŠ½è±¡ç±»æä¾›äº†ä¸€ç§ IS-A å…³ç³»ï¼Œéœ€è¦æ»¡è¶³é‡Œå¼æ›¿æ¢åŸåˆ™ï¼Œå³å­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ã€‚è€Œæ¥å£æ›´åƒæ˜¯ä¸€ç§ LIKE-A å…³ç³»ï¼Œå®ƒåªæ˜¯æä¾›ä¸€ç§æ–¹æ³•å®ç°å¥‘çº¦ï¼Œå¹¶ä¸è¦æ±‚æ¥å£å’Œå®ç°æ¥å£çš„ç±»å…·æœ‰ IS-A å…³ç³»ã€‚
- ä»ä½¿ç”¨ä¸Šæ¥çœ‹ï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†æ˜¯ä¸èƒ½ç»§æ‰¿å¤šä¸ªæŠ½è±¡ç±»ã€‚
- æ¥å£çš„å­—æ®µåªèƒ½æ˜¯ static å’Œ final ç±»å‹çš„ï¼Œè€ŒæŠ½è±¡ç±»çš„å­—æ®µæ²¡æœ‰è¿™ç§é™åˆ¶ã€‚
- æ¥å£çš„æˆå‘˜åªèƒ½æ˜¯ public çš„ï¼Œè€ŒæŠ½è±¡ç±»çš„æˆå‘˜å¯ä»¥æœ‰å¤šç§è®¿é—®æƒé™ã€‚

### ä½•æ—¶ä½¿ç”¨æŠ½è±¡ç±»ï¼Œä½•æ—¶ä½¿ç”¨æ¥å£

ä½¿ç”¨æ¥å£ï¼š

- éœ€è¦è®©ä¸ç›¸å…³çš„ç±»éƒ½å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ä¸ç›¸å…³çš„ç±»éƒ½å¯ä»¥å®ç° Comparable æ¥å£ä¸­çš„ compareTo() æ–¹æ³•ï¼›
- éœ€è¦ä½¿ç”¨å¤šé‡ç»§æ‰¿ã€‚

ä½¿ç”¨æŠ½è±¡ç±»ï¼š

- éœ€è¦åœ¨å‡ ä¸ªç›¸å…³çš„ç±»ä¸­å…±äº«ä»£ç ã€‚
- éœ€è¦èƒ½æ§åˆ¶ç»§æ‰¿æ¥çš„æˆå‘˜çš„è®¿é—®æƒé™ï¼Œè€Œä¸æ˜¯éƒ½ä¸º publicã€‚
- éœ€è¦ç»§æ‰¿éé™æ€å’Œéå¸¸é‡å­—æ®µã€‚

åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¥å£ä¼˜å…ˆäºæŠ½è±¡ç±»ã€‚å› ä¸ºæ¥å£æ²¡æœ‰æŠ½è±¡ç±»ä¸¥æ ¼çš„ç±»å±‚æ¬¡ç»“æ„è¦æ±‚ï¼Œå¯ä»¥çµæ´»åœ°ä¸ºä¸€ä¸ªç±»æ·»åŠ è¡Œä¸ºã€‚å¹¶ä¸”ä» Java 8 å¼€å§‹ï¼Œæ¥å£ä¹Ÿå¯ä»¥æœ‰é»˜è®¤çš„æ–¹æ³•å®ç°ï¼Œä½¿å¾—ä¿®æ”¹æ¥å£çš„æˆæœ¬ä¹Ÿå˜çš„å¾ˆä½ã€‚

### é‡è½½å’Œé‡å†™çš„åŒºåˆ«

> é‡è½½å°±æ˜¯åŒæ ·çš„ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ ¹æ®è¾“å…¥æ•°æ®çš„ä¸åŒï¼Œåšå‡ºä¸åŒçš„å¤„ç†
>
> é‡å†™å°±æ˜¯å½“å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç›¸åŒæ–¹æ³•ï¼Œè¾“å…¥æ•°æ®ä¸€æ ·ï¼Œä½†è¦åšå‡ºæœ‰åˆ«äºçˆ¶ç±»çš„å“åº”æ—¶ï¼Œä½ å°±è¦è¦†ç›–çˆ¶ç±»æ–¹æ³•

**é‡è½½**

å‘ç”Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼ˆæˆ–è€…çˆ¶ç±»å’Œå­ç±»ä¹‹é—´ï¼‰ï¼Œæ–¹æ³•åå¿…é¡»ç›¸åŒï¼Œå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼Œæ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä¸åŒã€‚

ç»¼ä¸Šï¼šé‡è½½å°±æ˜¯åŒä¸€ä¸ªç±»ä¸­å¤šä¸ªåŒåæ–¹æ³•æ ¹æ®ä¸åŒçš„ä¼ å‚æ¥æ‰§è¡Œä¸åŒçš„é€»è¾‘å¤„ç†ã€‚

**é‡å†™**

é‡å†™å‘ç”Ÿåœ¨è¿è¡ŒæœŸï¼Œæ˜¯å­ç±»å¯¹çˆ¶ç±»çš„å…è®¸è®¿é—®çš„æ–¹æ³•çš„å®ç°è¿‡ç¨‹è¿›è¡Œé‡æ–°ç¼–å†™ã€‚

1. è¿”å›å€¼ç±»å‹ã€æ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼ŒæŠ›å‡ºçš„å¼‚å¸¸èŒƒå›´å°äºç­‰äºçˆ¶ç±»ï¼Œè®¿é—®ä¿®é¥°ç¬¦èŒƒå›´å¤§äºç­‰äºçˆ¶ç±»ã€‚
2. å¦‚æœçˆ¶ç±»æ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦ä¸º `private/final/static` åˆ™å­ç±»å°±ä¸èƒ½é‡å†™è¯¥æ–¹æ³•ï¼Œä½†æ˜¯è¢« static ä¿®é¥°çš„æ–¹æ³•èƒ½å¤Ÿè¢«å†æ¬¡å£°æ˜ã€‚
3. æ„é€ æ–¹æ³•æ— æ³•è¢«é‡å†™

ç»¼ä¸Šï¼š**é‡å†™å°±æ˜¯å­ç±»å¯¹çˆ¶ç±»æ–¹æ³•çš„é‡æ–°æ”¹é€ ï¼Œå¤–éƒ¨æ ·å­ä¸èƒ½æ”¹å˜ï¼Œå†…éƒ¨é€»è¾‘å¯ä»¥æ”¹å˜ã€‚**

| åŒºåˆ«ç‚¹     | é‡è½½æ–¹æ³• | é‡å†™æ–¹æ³•                                                         |
| :--------- | :------- | :--------------------------------------------------------------- |
| å‘ç”ŸèŒƒå›´   | åŒä¸€ä¸ªç±» | å­ç±»                                                             |
| å‚æ•°åˆ—è¡¨   | å¿…é¡»ä¿®æ”¹ | ä¸€å®šä¸èƒ½ä¿®æ”¹                                                     |
| è¿”å›ç±»å‹   | å¯ä¿®æ”¹   | å­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–ç›¸ç­‰               |
| å¼‚å¸¸       | å¯ä¿®æ”¹   | å­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»åº”æ¯”çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»æ›´å°æˆ–ç›¸ç­‰ï¼› |
| è®¿é—®ä¿®é¥°ç¬¦ | å¯ä¿®æ”¹   | ä¸€å®šä¸èƒ½åšæ›´ä¸¥æ ¼çš„é™åˆ¶ï¼ˆå¯ä»¥é™ä½é™åˆ¶ï¼‰                           |
| å‘ç”Ÿé˜¶æ®µ   | ç¼–è¯‘æœŸ   | è¿è¡ŒæœŸ                                                           |

**æ–¹æ³•çš„é‡å†™è¦éµå¾ªâ€œä¸¤åŒä¸¤å°ä¸€å¤§â€**ï¼ˆä»¥ä¸‹å†…å®¹æ‘˜å½•è‡ªã€Šç–¯ç‹‚ Java è®²ä¹‰ã€‹ï¼Œ[issue#892 (opens new window)](https://github.com/Snailclimb/JavaGuide/issues/892) ï¼‰ï¼š

- â€œä¸¤åŒâ€å³æ–¹æ³•åç›¸åŒã€å½¢å‚åˆ—è¡¨ç›¸åŒï¼›
- â€œä¸¤å°â€æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–ç›¸ç­‰ï¼Œå­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»åº”æ¯”çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»æ›´å°æˆ–ç›¸ç­‰ï¼›
- â€œä¸€å¤§â€æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™åº”æ¯”çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™æ›´å¤§æˆ–ç›¸ç­‰ã€‚

â­ï¸ å…³äº **é‡å†™çš„è¿”å›å€¼ç±»å‹** è¿™é‡Œéœ€è¦é¢å¤–å¤šè¯´æ˜ä¸€ä¸‹ï¼Œä¸Šé¢çš„è¡¨è¿°ä¸å¤ªæ¸…æ™°å‡†ç¡®ï¼šå¦‚æœæ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯ void å’ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¿”å›å€¼é‡å†™æ—¶ä¸å¯ä¿®æ”¹ã€‚ä½†æ˜¯å¦‚æœæ–¹æ³•çš„è¿”å›å€¼æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‡å†™æ—¶æ˜¯å¯ä»¥è¿”å›è¯¥å¼•ç”¨ç±»å‹çš„å­ç±»çš„ã€‚

```java
public class Hero {
    public String name() {
        return "è¶…çº§è‹±é›„";
    }
}
public class SuperMan extends Hero{
    @Override
    public String name() {
        return "è¶…äºº";
    }
    public Hero hero() {
        return new Hero();
    }
}

public class SuperSuperMan extends SuperMan {
    public String name() {
        return "è¶…çº§è¶…çº§è‹±é›„";
    }

    @Override
    public SuperMan hero() {
        return new SuperMan();
    }
}
```

## æ•°æ®ç»“æ„

### [HashMap å®¹é‡ä¸ºä»€ä¹ˆæ€»æ˜¯ä¸º 2 çš„æ¬¡å¹‚ï¼Ÿ](https://www.cnblogs.com/javastack/p/13356402.html)

HashMap æ˜¯æ ¹æ® key çš„ hash å€¼å†³ç­– key æ”¾å…¥åˆ°å“ªä¸ªæ¡¶ï¼ˆbucketï¼‰ä¸­ï¼Œé€šè¿‡ tab[(n - 1) & hash] å…¬å¼è®¡ç®—å¾—å‡ºï¼Œå…¶ä¸­ tab æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ã€‚

**ä¸ºä»€ä¹ˆè¦é€šè¿‡ (n - 1) & hash å†³å®šæ¡¶çš„ç´¢å¼•å‘¢ï¼Ÿ**

- &è¿ç®—é€Ÿåº¦å¿«ï¼Œè‡³å°‘æ¯”%å–æ¨¡è¿ç®—å—

- (n - 1) & hashï¼Œå½“ n ä¸º 2 æ¬¡å¹‚æ—¶ï¼Œä¼šæ»¡è¶³ä¸€ä¸ªå…¬å¼ï¼š(n - 1) & hash = hash % n

![image-20211126151441769](https://gitee.com/zhangxianbing/assets/raw/master/typora/2021-11-26-15-14-49_image-20211126151441769.png)

## æ³›å‹

- [æ·±å…¥ç†è§£ Java æ³›å‹](https://dunwu.github.io/javacore/basics/java-generic.html)
- [Java æ³›å‹è¯¦è§£](https://www.cnblogs.com/Blue-Keroro/p/8875898.html)
- <https://www.cnblogs.com/wuqinglong/p/9456193.html>
- [10 é“ Java æ³›å‹é¢è¯•é¢˜](https://cloud.tencent.com/developer/article/1033693)

### Java ä¸­çš„æ³›å‹æ˜¯ä»€ä¹ˆ ? ä½¿ç”¨æ³›å‹çš„å¥½å¤„æ˜¯ä»€ä¹ˆ?

**æ³›å‹ï¼Œå³â€œå‚æ•°åŒ–ç±»å‹â€**

å¥½å¤„ï¼š

- æä¾›äº†ç¼–è¯‘æœŸçš„ç±»å‹å®‰å…¨ï¼Œé¿å…è¿è¡Œæ—¶å‡ºç° ClassCastExceptionã€‚
- å¯ä»¥é¿å…ç±»å‹è½¬æ¢
- æ³›å‹ç¼–ç¨‹å¯å®ç°é€šç”¨ç®—æ³•

### ç±»å‹å‚æ•°å‘½ååŸåˆ™

Java ç¼–ç¨‹çº¦å®šè¦æ±‚ç±»å‹å‚æ•°åç§°ä¸ºå•ä¸ªå¤§å†™å­—æ¯ï¼Œä¾‹å¦‚ E è¡¨ç¤ºå…ƒç´ ï¼ŒK è¡¨ç¤ºé”®ï¼ŒV è¡¨ç¤ºå€¼ï¼ŒT è¡¨ç¤ºç±»å‹ã€‚é¿å…ä½¿ç”¨åƒ A, B, C è¿™æ ·æ²¡æœ‰æ„ä¹‰çš„åç§°ã€‚(ä½†å¹¶ä¸æ˜¯è¯­æ³•å±‚é¢çš„é™åˆ¶)ã€‚

### Java çš„æ³›å‹æ˜¯å¦‚ä½•å·¥ä½œçš„ ? ä»€ä¹ˆæ˜¯ç±»å‹æ“¦é™¤ ?

ä¸åŒäº C++ çš„æ¨¡æ¿æœºåˆ¶ï¼Œ**Java æ³›å‹æ˜¯ä½¿ç”¨ç±»å‹æ“¦é™¤æ¥å®ç°çš„ï¼Œä½¿ç”¨æ³›å‹æ—¶ï¼Œä»»ä½•å…·ä½“çš„ç±»å‹ä¿¡æ¯éƒ½è¢«æ“¦é™¤äº†**ã€‚ï¼ˆå¦‚åœ¨ä»£ç ä¸­å®šä¹‰`List<Object>`å’Œ`List<String>`ç­‰ç±»å‹ï¼Œåœ¨ç¼–è¯‘åéƒ½ä¼šå˜æˆ`List`ï¼ŒJVM çœ‹åˆ°çš„åªæ˜¯`List`ï¼‰

æ‹“å±•ï¼šC++æ¨¡æ¿æœºåˆ¶ï¼šç¼–è¯‘å™¨ä»å‡½æ•°æ¨¡æ¿é€šè¿‡å…·ä½“ç±»å‹äº§ç”Ÿä¸åŒçš„å‡½æ•°ï¼›ç¼–è¯‘å™¨ä¼šå¯¹å‡½æ•°æ¨¡æ¿è¿›è¡Œä¸¤æ¬¡ç¼–è¯‘ï¼šåœ¨å£°æ˜çš„åœ°æ–¹å¯¹æ¨¡æ¿ä»£ç æœ¬èº«è¿›è¡Œç¼–è¯‘ï¼Œåœ¨è°ƒç”¨çš„åœ°æ–¹å¯¹å‚æ•°æ›¿æ¢åçš„ä»£ç è¿›è¡Œç¼–è¯‘ã€‚

ç±»å‹æ“¦é™¤åšäº†ä»€ä¹ˆå‘¢ï¼Ÿå®ƒåšäº†ä»¥ä¸‹å·¥ä½œï¼š

- æŠŠæ³›å‹ä¸­çš„æ‰€æœ‰ç±»å‹å‚æ•°æ›¿æ¢ä¸º Objectï¼Œå¦‚æœæŒ‡å®šç±»å‹è¾¹ç•Œï¼Œåˆ™ä½¿ç”¨ç±»å‹è¾¹ç•Œæ¥æ›¿æ¢ã€‚å› æ­¤ï¼Œç”Ÿæˆçš„å­—èŠ‚ç ä»…åŒ…å«æ™®é€šçš„ç±»ï¼Œæ¥å£å’Œæ–¹æ³•ã€‚
- æ“¦é™¤å‡ºç°çš„ç±»å‹å£°æ˜ï¼Œå³å»æ‰ `<>` çš„å†…å®¹ã€‚æ¯”å¦‚ `T get()` æ–¹æ³•å£°æ˜å°±å˜æˆäº† `Object get()` ï¼›`List<String>` å°±å˜æˆäº† `List`ã€‚å¦‚æœ‰å¿…è¦ï¼Œæ’å…¥ç±»å‹è½¬æ¢ä»¥ä¿æŒç±»å‹å®‰å…¨ã€‚
- ç”Ÿæˆæ¡¥æ¥æ–¹æ³•ä»¥ä¿ç•™æ‰©å±•æ³›å‹ç±»å‹ä¸­çš„å¤šæ€æ€§ã€‚ç±»å‹æ“¦é™¤ç¡®ä¿ä¸ä¸ºå‚æ•°åŒ–ç±»å‹åˆ›å»ºæ–°ç±»ï¼›å› æ­¤ï¼Œæ³›å‹ä¸ä¼šäº§ç”Ÿè¿è¡Œæ—¶å¼€é”€ã€‚ [ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•](https://www.cnblogs.com/wuqinglong/p/9456193.html)

ä¾‹å­ï¼š

```java
List<String> stringArrayList = new ArrayList<String>();
List<Integer> integerArrayList = new ArrayList<Integer>();

Class classStringArrayList = stringArrayList.getClass();
Class classIntegerArrayList = integerArrayList.getClass();

if(classStringArrayList.equals(classIntegerArrayList)){
    Log.d("æ³›å‹æµ‹è¯•","ç±»å‹ç›¸åŒ");
}
```

è¾“å‡ºç»“æœï¼š`æ³›å‹æµ‹è¯•: ç±»å‹ç›¸åŒ`ã€‚

**æ€»ç»“æˆä¸€å¥è¯ï¼šæ³›å‹ç±»å‹åœ¨é€»è¾‘ä¸Šçœ‹ä»¥çœ‹æˆæ˜¯å¤šä¸ªä¸åŒçš„ç±»å‹ï¼Œå®é™…ä¸Šéƒ½æ˜¯ç›¸åŒçš„åŸºæœ¬ç±»å‹ã€‚**

### æ³›å‹çš„ä½¿ç”¨

- åœ¨æ³›å‹ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ï¼Œè¿™ç§å‚æ•°ç±»å‹å¯ä»¥ç”¨åœ¨ç±»ã€æ¥å£å’Œæ–¹æ³•ä¸­ï¼Œåˆ†åˆ«è¢«ç§°ä¸ºæ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€‚

- å®šä¹‰çš„æ³›å‹ç±»ï¼Œå°±ä¸€å®šè¦ä¼ å…¥æ³›å‹ç±»å‹å®å‚ä¹ˆï¼Ÿå¯ä»¥ä¸ä¼ 

  åœ¨ä½¿ç”¨æ³›å‹çš„æ—¶å€™å¦‚æœä¼ å…¥æ³›å‹å®å‚ï¼Œåˆ™ä¼šæ ¹æ®ä¼ å…¥çš„æ³›å‹å®å‚åšç›¸åº”çš„é™åˆ¶ï¼Œæ­¤æ—¶æ³›å‹æ‰ä¼šèµ·åˆ°æœ¬åº”èµ·åˆ°çš„é™åˆ¶ä½œç”¨ã€‚

  å¦‚æœä¸ä¼ å…¥æ³›å‹ç±»å‹å®å‚çš„è¯ï¼Œåœ¨æ³›å‹ç±»ä¸­ä½¿ç”¨æ³›å‹çš„æ–¹æ³•æˆ–æˆå‘˜å˜é‡å®šä¹‰çš„ç±»å‹å¯ä»¥ä¸ºä»»ä½•çš„ç±»å‹ï¼Œä½†è¿™æ ·çš„è°ƒç”¨å°±å¤±å»æ³›å‹ç±»å‹çš„ä¼˜åŠ¿ã€‚

### æ³›å‹ä¸ç»§æ‰¿

**æ³›å‹ä¸èƒ½ç”¨äºæ˜¾å¼åœ°å¼•ç”¨è¿è¡Œæ—¶ç±»å‹çš„æ“ä½œä¹‹ä¸­ï¼Œä¾‹å¦‚ï¼šè½¬å‹ã€instanceof æ“ä½œå’Œ new è¡¨è¾¾å¼ã€‚å› ä¸ºæ‰€æœ‰å…³äºå‚æ•°çš„ç±»å‹ä¿¡æ¯éƒ½ä¸¢å¤±äº†**ã€‚å½“ä½ åœ¨ç¼–å†™æ³›å‹ä»£ç æ—¶ï¼Œå¿…é¡»æ—¶åˆ»æé†’è‡ªå·±ï¼Œä½ åªæ˜¯çœ‹èµ·æ¥å¥½åƒæ‹¥æœ‰æœ‰å…³å‚æ•°çš„ç±»å‹ä¿¡æ¯è€Œå·²ã€‚

æ­£æ˜¯ç”±äºæ³›å‹æ—¶åŸºäºç±»å‹æ“¦é™¤å®ç°çš„ï¼Œæ‰€ä»¥ï¼Œ**æ³›å‹ç±»å‹æ— æ³•å‘ä¸Šè½¬å‹**ã€‚

> å‘ä¸Šè½¬å‹æ˜¯æŒ‡ç”¨å­ç±»å®ä¾‹å»åˆå§‹åŒ–çˆ¶ç±»ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡ä¸­å¤šæ€çš„é‡è¦è¡¨ç°ã€‚

![img](https://raw.githubusercontent.com/dunwu/images/dev/snap/1553147778883.png)

`Integer` ç»§æ‰¿äº† `Object`ï¼›`ArrayList` ç»§æ‰¿äº† `List`ï¼›ä½†æ˜¯ `List<Interger>` å´å¹¶éç»§æ‰¿äº† `List<Object>`ã€‚

è¿™æ˜¯å› ä¸ºï¼Œæ³›å‹ç±»å¹¶æ²¡æœ‰è‡ªå·±ç‹¬æœ‰çš„ `Class` ç±»å¯¹è±¡ã€‚æ¯”å¦‚ï¼šå¹¶ä¸å­˜åœ¨ `List<Object>.class` æˆ–æ˜¯ `List<Interger>.class`ï¼ŒJava ç¼–è¯‘å™¨ä¼šå°†äºŒè€…éƒ½è§†ä¸º `List.class`ã€‚

ç›¸å…³é—®é¢˜ï¼š

1. å¯ä»¥æŠŠ List<String>ä¼ é€’ç»™ä¸€ä¸ªæ¥å— List<Object>å‚æ•°çš„æ–¹æ³•å—ï¼Ÿä¸è¡Œ

### ä»€ä¹ˆæ˜¯æ³›å‹ä¸­çš„é™å®šé€šé…ç¬¦å’Œéé™å®šé€šé…ç¬¦ ?

- ç±»å‹é€šé…ç¬¦ä¸€èˆ¬æ˜¯ä½¿ç”¨ï¼Ÿä»£æ›¿å…·ä½“çš„ç±»å‹å®å‚ï¼Œæ³¨æ„ï¼Œ**æ­¤å¤„â€™ï¼Ÿâ€™æ˜¯ç±»å‹å®å‚ï¼Œè€Œä¸æ˜¯ç±»å‹å½¢å‚** ã€‚ï¼ˆå¯ä»¥æŠŠï¼Ÿçœ‹æˆæ‰€æœ‰ç±»å‹çš„çˆ¶ç±»ã€‚æ˜¯ä¸€ç§çœŸå®çš„ç±»å‹ã€‚ï¼‰
- é™å®šé€šé…ç¬¦å¯¹ç±»å‹è¿›è¡Œäº†é™åˆ¶ã€‚æœ‰ä¸¤ç§é™å®šé€šé…ç¬¦ï¼Œä¸€ç§æ˜¯<? extends T>å®ƒé€šè¿‡ç¡®ä¿ç±»å‹å¿…é¡»æ˜¯ T çš„å­ç±»æ¥è®¾å®šç±»å‹çš„**ä¸Šç•Œ**ï¼Œå¦ä¸€ç§æ˜¯<? super T>å®ƒé€šè¿‡ç¡®ä¿ç±»å‹å¿…é¡»æ˜¯ T çš„çˆ¶ç±»æ¥è®¾å®šç±»å‹çš„**ä¸‹ç•Œ**ã€‚æ³›å‹ç±»å‹å¿…é¡»ç”¨é™å®šå†…çš„ç±»å‹æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚
- <?>è¡¨ç¤ºäº†éé™å®šé€šé…ç¬¦ï¼Œå› ä¸º<?>å¯ä»¥ç”¨ä»»æ„ç±»å‹æ¥æ›¿ä»£ã€‚

### é€šé…ç¬¦å’Œå‘ä¸Šè½¬å‹

å‰é¢ï¼Œæˆ‘ä»¬æåˆ°ï¼š**æ³›å‹ä¸èƒ½å‘ä¸Šè½¬å‹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é€šé…ç¬¦æ¥å‘ä¸Šè½¬å‹**ã€‚

### åå˜ä¸é€†å˜

<https://www.cnblogs.com/en-heng/p/5041124.html>

é€†å˜ä¸åå˜ç”¨æ¥æè¿°ç±»å‹è½¬æ¢ï¼ˆtype transformationï¼‰åçš„ç»§æ‰¿å…³ç³»ï¼Œå…¶å®šä¹‰ï¼šå¦‚æœ*ğ´*ã€*ğµ*è¡¨ç¤ºç±»å‹ï¼Œ_ğ‘“_(â‹…)f(â‹…)è¡¨ç¤ºç±»å‹è½¬æ¢ï¼Œâ‰¤â‰¤ è¡¨ç¤ºç»§æ‰¿å…³ç³»ï¼ˆæ¯”å¦‚ï¼Œ*ğ´*â‰¤*ğµ*è¡¨ç¤º*ğ´*æ˜¯ç”±*ğµ*æ´¾ç”Ÿå‡ºæ¥çš„å­ç±»ï¼‰ï¼›

- _ğ‘“_(â‹…)f(â‹…)æ˜¯é€†å˜ï¼ˆcontravariantï¼‰çš„ï¼Œå½“*ğ´*â‰¤*ğµ æ—¶æœ‰*ğ‘“*(*ğµ*)â‰¤*ğ‘“*(*ğ´)æˆç«‹ï¼›
- _ğ‘“_(â‹…)f(â‹…)æ˜¯åå˜ï¼ˆcovariantï¼‰çš„ï¼Œå½“*ğ´*â‰¤*ğµ æ—¶æœ‰*ğ‘“*(*ğ´*)â‰¤*ğ‘“*(*ğµ)æˆç«‹ï¼›
- _ğ‘“_(â‹…)f(â‹…)æ˜¯ä¸å˜ï¼ˆinvariantï¼‰çš„ï¼Œå½“*ğ´*â‰¤*ğµ æ—¶ä¸Šè¿°ä¸¤ä¸ªå¼å­å‡ä¸æˆç«‹ï¼Œå³*ğ‘“*(*ğ´*)ä¸*ğ‘“(ğµ)ç›¸äº’ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ã€‚

æ•°ç»„æ˜¯åå˜çš„

```java
Number[] numbers = new Integer[3];
```

Java ä¸­æ³›å‹æ˜¯ä¸å˜çš„ï¼Œå¯æœ‰æ—¶éœ€è¦å®ç°é€†å˜ä¸åå˜ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶ï¼Œé€šé…ç¬¦`?`æ´¾ä¸Šäº†ç”¨åœºï¼š

- `<? extends>`å®ç°äº†æ³›å‹çš„åå˜ï¼Œæ¯”å¦‚ï¼š

```java
List<? extends Number> list = new ArrayList<Integer>();
```

- `<? super>`å®ç°äº†æ³›å‹çš„é€†å˜ï¼Œæ¯”å¦‚ï¼š

```java
List<? super Number> list = new ArrayList<Object>();
```

ç°åœ¨é—®é¢˜æ¥äº†ï¼šç©¶ç«Ÿä»€ä¹ˆæ—¶å€™ç”¨ extends ä»€ä¹ˆæ—¶å€™ç”¨ super å‘¢ï¼Ÿã€ŠEffective Javaã€‹ç»™å‡ºäº†ç­”æ¡ˆï¼š

> PECS: producer-extends, consumer-super.

æ¯”å¦‚ï¼Œä¸€ä¸ªç®€å•çš„ Stack APIï¼š

```java
public class  Stack<E>{
    public Stack();
    public void push(E e):
    public E pop();
    public boolean isEmpty();
}
```

è¦å®ç°`pushAll(Iterable<E> src)`æ–¹æ³•ï¼Œå°† src çš„å…ƒç´ é€ä¸€å…¥æ ˆï¼š

```java
public void pushAll(Iterable<E> src){
    for(E e : src)
        push(e)
}
```

å‡è®¾æœ‰ä¸€ä¸ªå®ä¾‹åŒ–`Stack<Number>`çš„å¯¹è±¡ stackï¼Œsrc æœ‰`Iterable<Integer>`ä¸ `Iterable<Float>`ï¼›åœ¨è°ƒç”¨ pushAll æ–¹æ³•æ—¶ä¼šå‘ç”Ÿ type mismatch é”™è¯¯ï¼Œå› ä¸º Java ä¸­æ³›å‹æ˜¯ä¸å¯å˜çš„ï¼Œ`Iterable<Integer>`ä¸ `Iterable<Float>`éƒ½ä¸æ˜¯`Iterable<Number>`çš„å­ç±»å‹ã€‚å› æ­¤ï¼Œåº”æ”¹ä¸º

```java
// Wildcard type for parameter that serves as an E producer
public void pushAll(Iterable<? extends E> src) {
    for (E e : src)
        push(e);
}
```

è¦å®ç°`popAll(Collection<E> dst)`æ–¹æ³•ï¼Œå°† Stack ä¸­çš„å…ƒç´ ä¾æ¬¡å–å‡º add åˆ° dst ä¸­ï¼Œå¦‚æœä¸ç”¨é€šé…ç¬¦å®ç°ï¼š

```java
// popAll method without wildcard type - deficient!
public void popAll(Collection<E> dst) {
    while (!isEmpty())
        dst.add(pop());
}
```

åŒæ ·åœ°ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå®ä¾‹åŒ–`Stack<Number>`çš„å¯¹è±¡ stackï¼Œdst ä¸º`Collection<Object>`ï¼›è°ƒç”¨ popAll æ–¹æ³•æ˜¯ä¼šå‘ç”Ÿ type mismatch é”™è¯¯ï¼Œå› ä¸º`Collection<Object>`ä¸æ˜¯`Collection<Number>`çš„å­ç±»å‹ã€‚å› è€Œï¼Œåº”æ”¹ä¸ºï¼š

```java
// Wildcard type for parameter that serves as an E consumer
public void popAll(Collection<? super E> dst) {
    while (!isEmpty())
        dst.add(pop());
}
```

åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œåœ¨è°ƒç”¨ pushAll æ–¹æ³•æ—¶ç”Ÿäº§äº† E å®ä¾‹ï¼ˆproduces E instancesï¼‰ï¼Œåœ¨è°ƒç”¨ popAll æ–¹æ³•æ—¶ dst æ¶ˆè´¹äº† E å®ä¾‹ï¼ˆconsumes E instancesï¼‰ã€‚Naftalin ä¸ Wadler å°† PECS ç§°ä¸º**Get and Put Principle**ã€‚

java.util.Collections çš„ copy æ–¹æ³•(JDK1.7)å®Œç¾åœ°è¯ é‡Šäº† PECSï¼š

```java
public static <T> void copy(List<? super T> dest, List<? extends T> src) {
    int srcSize = src.size();
    if (srcSize > dest.size())
        throw new IndexOutOfBoundsException("Source does not fit in dest");

    if (srcSize < COPY_THRESHOLD ||
        (src instanceof RandomAccess && dest instanceof RandomAccess)) {
        for (int i=0; i<srcSize; i++)
            dest.set(i, src.get(i));
    } else {
        ListIterator<? super T> di=dest.listIterator();
        ListIterator<? extends T> si=src.listIterator();
        for (int i=0; i<srcSize; i++) {
            di.next();
            di.set(si.next());
        }
    }
}
```

PECS æ€»ç»“ï¼š

- è¦ä»æ³›å‹ç±»å–æ•°æ®æ—¶ï¼Œç”¨ extendsï¼›
- è¦å¾€æ³›å‹ç±»å†™æ•°æ®æ—¶ï¼Œç”¨ superï¼›
- æ—¢è¦å–åˆè¦å†™ï¼Œå°±ä¸ç”¨é€šé…ç¬¦ï¼ˆå³ extends ä¸ super éƒ½ä¸ç”¨ï¼‰ã€‚

### æ³›å‹çš„çº¦æŸ

å› ä¸ºç§ç§åŸå› ï¼ŒJava ä¸èƒ½å®ç°çœŸæ­£çš„æ³›å‹ï¼Œåªèƒ½ä½¿ç”¨ç±»å‹æ“¦é™¤æ¥å®ç°ä¼ªæ³›å‹ï¼Œè¿™æ ·è™½ç„¶ä¸ä¼šæœ‰ç±»å‹è†¨èƒ€é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¼•èµ·æ¥è®¸å¤šæ–°é—®é¢˜ï¼Œæ‰€ä»¥ï¼ŒSUN å¯¹è¿™äº›é—®é¢˜åšå‡ºäº†ç§ç§é™åˆ¶ï¼Œé¿å…æˆ‘ä»¬å‘ç”Ÿå„ç§é”™è¯¯ã€‚

- [æ³›å‹ç±»å‹çš„ç±»å‹å‚æ•°ä¸èƒ½æ˜¯å€¼ç±»å‹](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#instantiate)

```java
Pair<int, char> p = new Pair<>(8, 'a');  // ç¼–è¯‘é”™è¯¯
```

- [ä¸èƒ½åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createObjects)

```java
public static <E> void append(List<E> list) {
    E elem = new E();  // ç¼–è¯‘é”™è¯¯
    list.add(elem);
}
```

- [ä¸èƒ½å£°æ˜ç±»å‹ä¸ºç±»å‹å‚æ•°çš„é™æ€æˆå‘˜](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createStatic)

```java
public class MobileDevice<T> {
    private static T os; // error

    // ...
}
```

- [ç±»å‹å‚æ•°ä¸èƒ½ä½¿ç”¨ç±»å‹è½¬æ¢æˆ– `instanceof`](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#cannotCast)

```java
public static <E> void rtti(List<E> list) {
    if (list instanceof ArrayList<Integer>) {  // ç¼–è¯‘é”™è¯¯
        // ...
    }
}
List<Integer> li = new ArrayList<>();
List<Number>  ln = (List<Number>) li;  // ç¼–è¯‘é”™è¯¯
```

- [ä¸èƒ½åˆ›å»ºç±»å‹å‚æ•°çš„æ•°ç»„](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays)

```java
List<Integer>[] arrayOfLists = new List<Integer>[2];  // ç¼–è¯‘é”™è¯¯
```

- [ä¸èƒ½åˆ›å»ºã€catch æˆ– throw å‚æ•°åŒ–ç±»å‹å¯¹è±¡](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#cannotCatch)

```java
// Extends Throwable indirectly
class MathException<T> extends Exception { /* ... */ }    // ç¼–è¯‘é”™è¯¯

// Extends Throwable directly
class QueueFullException<T> extends Throwable { /* ... */ // ç¼–è¯‘é”™è¯¯
public static <T extends Exception, J> void execute(List<J> jobs) {
    try {
        for (J job : jobs)
            // ...
    } catch (T e) {   // compile-time error
        // ...
    }
}
```

- [ä»…ä»…æ˜¯æ³›å‹ç±»ç›¸åŒï¼Œè€Œç±»å‹å‚æ•°ä¸åŒçš„æ–¹æ³•ä¸èƒ½é‡è½½](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#cannotOverload)

```java
public class Example {
    public void print(Set<String> strSet) { }
    public void print(Set<Integer> intSet) { } // ç¼–è¯‘é”™è¯¯
}
```

### ä¸ºä»€ä¹ˆ JAVA ä¸æ”¯æŒæ³›å‹ç±»å‹çš„æ•°ç»„?

- [åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆ JAVA ä¸æ”¯æŒæ³›å‹ç±»å‹çš„æ•°ç»„](https://www.cnblogs.com/scutwang/articles/3735219.html)
- [java ä¸ºä»€ä¹ˆä¸æ”¯æŒæ³›å‹æ•°ç»„ï¼Ÿ](https://www.zhihu.com/question/20928981)

åœ¨ java ä¸­æ˜¯**â€ä¸èƒ½åˆ›å»ºä¸€ä¸ªç¡®åˆ‡çš„æ³›å‹ç±»å‹çš„æ•°ç»„â€**çš„

ä¸‹é¢çš„è¿™ä¸ªä¾‹å­æ˜¯ä¸å¯ä»¥çš„ï¼š

```java
List<String>[] ls = new ArrayList<String>[10];
```

è€Œä½¿ç”¨é€šé…ç¬¦åˆ›å»ºæ³›å‹æ•°ç»„æ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```java
List<?>[] ls = new ArrayList<?>[10];
```

è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š

```java
List<String>[] ls = new ArrayList[10];
```

ä¸‹é¢ä½¿ç”¨[Sun](http://docs.oracle.com/javase/tutorial/extra/generics/fineprint.html)[çš„ä¸€ç¯‡æ–‡æ¡£](http://docs.oracle.com/javase/tutorial/extra/generics/fineprint.html)çš„ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼š

```java
List<String>[] lsa = new List<String>[10]; // Not really allowed.
Object o = lsa;
Object[] oa = (Object[]) o;
List<Integer> li = new ArrayList<Integer>();
li.add(new Integer(3));
oa[1] = li; // Unsound, but passes run time store check
String s = lsa[1].get(0); // Run-time error: ClassCastException.
```

> è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äº JVM æ³›å‹çš„æ“¦é™¤æœºåˆ¶ï¼Œåœ¨è¿è¡Œæ—¶ JVM æ˜¯ä¸çŸ¥é“æ³›å‹ä¿¡æ¯çš„ï¼Œæ‰€ä»¥å¯ä»¥ç»™ oa[1]èµ‹ä¸Šä¸€ä¸ª ArrayList è€Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å–å‡ºæ•°æ®çš„æ—¶å€™å´è¦åšä¸€æ¬¡ç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç° ClassCastExceptionï¼Œå¦‚æœå¯ä»¥è¿›è¡Œæ³›å‹æ•°ç»„çš„å£°æ˜ï¼Œä¸Šé¢è¯´çš„è¿™ç§æƒ…å†µåœ¨ç¼–è¯‘æœŸå°†ä¸ä¼šå‡ºç°ä»»ä½•çš„è­¦å‘Šå’Œé”™è¯¯ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šå‡ºé”™ã€‚
>
> è€Œå¯¹æ³›å‹æ•°ç»„çš„å£°æ˜è¿›è¡Œé™åˆ¶ï¼Œå¯¹äºè¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸæç¤ºä»£ç æœ‰ç±»å‹å®‰å…¨é—®é¢˜ï¼Œæ¯”æ²¡æœ‰ä»»ä½•æç¤ºè¦å¼ºå¾ˆå¤šã€‚

ä¸‹é¢é‡‡ç”¨é€šé…ç¬¦çš„æ–¹å¼æ˜¯è¢«å…è®¸çš„:**æ•°ç»„çš„ç±»å‹ä¸å¯ä»¥æ˜¯ç±»å‹å˜é‡ï¼Œé™¤éæ˜¯é‡‡ç”¨é€šé…ç¬¦çš„æ–¹å¼**ï¼Œå› ä¸ºå¯¹äºé€šé…ç¬¦çš„æ–¹å¼ï¼Œæœ€åå–å‡ºæ•°æ®æ˜¯è¦åšæ˜¾å¼çš„ç±»å‹è½¬æ¢çš„ã€‚

```java
List<?>[] lsa = new List<?>[10]; // OK, array of unbounded wildcard type.
Object o = lsa;
Object[] oa = (Object[]) o;
List<Integer> li = new ArrayList<Integer>();
li.add(new Integer(3));
oa[1] = li; // Correct.
Integer i = (Integer) lsa[1].get(0); // OK
```

### ç¼–å†™ä¸€æ®µæ³›å‹ç¨‹åºæ¥å®ç° LinkedStack?

```java
public class LinkedStack<T> {
    private static class Node<U> {
        U item;
        Node<U> next;

        Node() {
            item = null;
            next = null;
        }

        public Node(U item, Node<U> next) {
            this.item = item;
            this.next = next;
        }

        boolean end() {
            return item == null && next == null;
        }
    }

    private Node<T> top = new Node<>();

    public void push(T item) {
        top = new Node<>(item, top);
    }

    public T pop() {
        T result = top.item;
        if (!top.end()) {
            top = top.next;
        }
        return result;
    }

    public static void main(String[] args) {
        LinkedStack<String> lss = new LinkedStack<>();

        for (String s : "A B C D".split(" ")) {
            lss.push(s);
        }

        String s;
        while ((s = lss.pop()) != null) {
            System.out.println(s);
        }
    }
}
```

### ç¼–å†™ä¸€æ®µæ³›å‹ç¨‹åºæ¥å®ç° LRU ç¼“å­˜?

## è®¾è®¡æ¨¡å¼
